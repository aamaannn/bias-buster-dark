import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

export type Language = 'en' | 'es' | 'ja' | 'de' | 'fr';

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  getLanguageName: (lang: Language) => string;
  getLanguageFlag: (lang: Language) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

// Language metadata
const languageMetadata = {
  en: { name: 'English', flag: 'üá∫üá∏', dir: 'ltr' },
  es: { name: 'Espa√±ol', flag: 'üá™üá∏', dir: 'ltr' },
  ja: { name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ', dir: 'ltr' },
  de: { name: 'Deutsch', flag: 'üá©üá™', dir: 'ltr' },
  fr: { name: 'Fran√ßais', flag: 'üá´üá∑', dir: 'ltr' }
};

// Translation keys and values
const translations = {
  en: {
    // Header
    'header.title': 'Bias Buster',
    'header.analyzer': 'Article Analyzer',
    'header.dashboard': 'Dashboard',
    'header.sources': 'Source Directory',
    'header.settings': 'API Settings',
    'header.darkMode': 'Switch to dark mode',
    'header.lightMode': 'Switch to light mode',
    
    // Article Analyzer
    'analyzer.hero.badge': 'AI-Powered Bias Detection',
    'analyzer.hero.title1': 'Uncover Hidden',
    'analyzer.hero.title2': 'Media Bias',
    'analyzer.hero.subtitle': 'Analyze any news article instantly with our advanced AI to detect political bias, emotional language, and factuality. See how different sources frame the same story.',
    'analyzer.input.placeholder': 'Paste any news article URL here...',
    'analyzer.button.analyze': 'Analyze Now',
    'analyzer.button.analyzing': 'Analyzing...',
    'analyzer.examples.title': 'Try these example articles:',
    'analyzer.results.title': 'Analysis Complete',
    'analyzer.results.subtitle': 'AI-powered bias detection results',
    'analyzer.results.source': 'Source:',
    'analyzer.results.author': 'Author:',
    'analyzer.results.published': 'Published:',
    'analyzer.results.viewOriginal': 'View Original Article',
    'analyzer.error.title': 'Analysis Error',
    
    // Bias Visualization
    'bias.political': 'Political Bias',
    'bias.factuality': 'Factuality',
    'bias.emotional': 'Emotional Language',
    'bias.political.desc': 'Political leaning detected in content',
    'bias.factuality.desc': 'Reliability and accuracy assessment',
    'bias.emotional.desc': 'Emotional intensity in language',
    'bias.left': 'Left',
    'bias.centerLeft': 'Center-Left',
    'bias.center': 'Center',
    'bias.centerRight': 'Center-Right',
    'bias.right': 'Right',
    'bias.factuality.high': 'High',
    'bias.factuality.medium': 'Medium',
    'bias.factuality.low': 'Low',
    'bias.emotional.high': 'High',
    'bias.emotional.medium': 'Medium',
    'bias.emotional.low': 'Low',
    
    // Comparative Coverage
    'coverage.title': 'Comparative Coverage',
    'coverage.subtitle': 'How different sources frame this story',
    'coverage.factuality': 'Factuality:',
    'coverage.tone': 'Tone:',
    'coverage.noResults': 'No comparative coverage found',
    'coverage.noResults.subtitle': 'Try analyzing a more recent or popular article',
    
    // Article Highlights
    'highlights.title': 'Content Analysis',
    'highlights.emotional': 'Emotional Language',
    'highlights.bias': 'Potential Bias',
    
    // Social Reactions
    'social.title': 'Social Media Reactions',
    'social.interactions': 'interactions',
    'social.comments': 'Top Comments:',
    'social.positive': 'positive',
    'social.negative': 'negative',
    'social.neutral': 'neutral',
    
    // Dashboard
    'dashboard.hero.badge': 'Personal Analytics',
    'dashboard.hero.title1': 'Your Reading',
    'dashboard.hero.title2': 'Analytics',
    'dashboard.hero.subtitle': 'Track your news consumption patterns, bias exposure, and reading habits over time.',
    'dashboard.stats.analyzed': 'Articles Analyzed',
    'dashboard.stats.alerts': 'Bias Alerts',
    'dashboard.stats.sources': 'Sources Tracked',
    'dashboard.stats.streak': 'Reading Streak',
    'dashboard.stats.days': 'days',
    'dashboard.bias.title': 'Bias Exposure History',
    'dashboard.bias.subtitle': 'Last 5 days of reading patterns',
    'dashboard.bias.articles': 'articles',
    'dashboard.sources.title': 'Top Sources',
    'dashboard.sources.subtitle': 'Most read news sources',
    'dashboard.sources.articles': 'articles',
    'dashboard.sources.factuality': 'factuality',
    
    // Source Directory
    'sources.title': 'News Source Directory',
    'sources.subtitle': 'Explore bias ratings and factuality scores for major news organizations worldwide.',
    'sources.search.placeholder': 'Search news sources...',
    'sources.filter.all': 'All Bias Types',
    'sources.political': 'Political Bias',
    'sources.category': 'Category',
    'sources.verified': 'Verified Source',
    
    // API Settings
    'api.title': 'API Configuration',
    'api.configured.title': 'API Keys Configured!',
    'api.configured.subtitle': 'Your NewsAPI and GNews keys are already set up and ready to use.',
    'api.newsapi.label': 'NewsAPI Key',
    'api.newsapi.placeholder': 'Get from newsapi.org',
    'api.gnews.label': 'GNews API Key',
    'api.gnews.placeholder': 'Get from gnews.io',
    'api.info.title': 'API Information:',
    'api.info.newsapi': 'NewsAPI: 100 requests/day (free tier)',
    'api.info.gnews': 'GNews: 100 requests/day (free tier)',
    'api.storage.note': 'API keys are stored locally in your browser',
    'api.button.update': 'Update Keys',
    'api.button.saved': 'Saved!',
    
    // Common
    'common.loading': 'Loading...',
    'common.error': 'Error',
    'common.close': 'Close',
    'common.save': 'Save',
    'common.cancel': 'Cancel',
    'common.new': 'New!',
    'common.unknown': 'Unknown',
  },
  es: {
    // Header
    'header.title': 'Detector de Sesgos',
    'header.analyzer': 'Analizador de Art√≠culos',
    'header.dashboard': 'Panel de Control',
    'header.sources': 'Directorio de Fuentes',
    'header.settings': 'Configuraci√≥n API',
    'header.darkMode': 'Cambiar a modo oscuro',
    'header.lightMode': 'Cambiar a modo claro',
    
    // Article Analyzer
    'analyzer.hero.badge': 'Detecci√≥n de Sesgos con IA',
    'analyzer.hero.title1': 'Descubre Sesgos',
    'analyzer.hero.title2': 'Medi√°ticos Ocultos',
    'analyzer.hero.subtitle': 'Analiza cualquier art√≠culo de noticias al instante con nuestra IA avanzada para detectar sesgos pol√≠ticos, lenguaje emocional y veracidad. Ve c√≥mo diferentes fuentes enmarcan la misma historia.',
    'analyzer.input.placeholder': 'Pega aqu√≠ cualquier URL de art√≠culo de noticias...',
    'analyzer.button.analyze': 'Analizar Ahora',
    'analyzer.button.analyzing': 'Analizando...',
    'analyzer.examples.title': 'Prueba estos art√≠culos de ejemplo:',
    'analyzer.results.title': 'An√°lisis Completo',
    'analyzer.results.subtitle': 'Resultados de detecci√≥n de sesgos con IA',
    'analyzer.results.source': 'Fuente:',
    'analyzer.results.author': 'Autor:',
    'analyzer.results.published': 'Publicado:',
    'analyzer.results.viewOriginal': 'Ver Art√≠culo Original',
    'analyzer.error.title': 'Error de An√°lisis',
    
    // Bias Visualization
    'bias.political': 'Sesgo Pol√≠tico',
    'bias.factuality': 'Veracidad',
    'bias.emotional': 'Lenguaje Emocional',
    'bias.political.desc': 'Inclinaci√≥n pol√≠tica detectada en el contenido',
    'bias.factuality.desc': 'Evaluaci√≥n de confiabilidad y precisi√≥n',
    'bias.emotional.desc': 'Intensidad emocional en el lenguaje',
    'bias.left': 'Izquierda',
    'bias.centerLeft': 'Centro-Izquierda',
    'bias.center': 'Centro',
    'bias.centerRight': 'Centro-Derecha',
    'bias.right': 'Derecha',
    'bias.factuality.high': 'Alta',
    'bias.factuality.medium': 'Media',
    'bias.factuality.low': 'Baja',
    'bias.emotional.high': 'Alto',
    'bias.emotional.medium': 'Medio',
    'bias.emotional.low': 'Bajo',
    
    // Comparative Coverage
    'coverage.title': 'Cobertura Comparativa',
    'coverage.subtitle': 'C√≥mo diferentes fuentes enmarcan esta historia',
    'coverage.factuality': 'Veracidad:',
    'coverage.tone': 'Tono:',
    'coverage.noResults': 'No se encontr√≥ cobertura comparativa',
    'coverage.noResults.subtitle': 'Intenta analizar un art√≠culo m√°s reciente o popular',
    
    // Article Highlights
    'highlights.title': 'An√°lisis de Contenido',
    'highlights.emotional': 'Lenguaje Emocional',
    'highlights.bias': 'Sesgo Potencial',
    
    // Social Reactions
    'social.title': 'Reacciones en Redes Sociales',
    'social.interactions': 'interacciones',
    'social.comments': 'Comentarios Principales:',
    'social.positive': 'positivo',
    'social.negative': 'negativo',
    'social.neutral': 'neutral',
    
    // Dashboard
    'dashboard.hero.badge': 'An√°lisis Personal',
    'dashboard.hero.title1': 'Tus An√°lisis',
    'dashboard.hero.title2': 'de Lectura',
    'dashboard.hero.subtitle': 'Rastrea tus patrones de consumo de noticias, exposici√≥n a sesgos y h√°bitos de lectura a lo largo del tiempo.',
    'dashboard.stats.analyzed': 'Art√≠culos Analizados',
    'dashboard.stats.alerts': 'Alertas de Sesgo',
    'dashboard.stats.sources': 'Fuentes Rastreadas',
    'dashboard.stats.streak': 'Racha de Lectura',
    'dashboard.stats.days': 'd√≠as',
    'dashboard.bias.title': 'Historial de Exposici√≥n a Sesgos',
    'dashboard.bias.subtitle': '√öltimos 5 d√≠as de patrones de lectura',
    'dashboard.bias.articles': 'art√≠culos',
    'dashboard.sources.title': 'Fuentes Principales',
    'dashboard.sources.subtitle': 'Fuentes de noticias m√°s le√≠das',
    'dashboard.sources.articles': 'art√≠culos',
    'dashboard.sources.factuality': 'veracidad',
    
    // Source Directory
    'sources.title': 'Directorio de Fuentes de Noticias',
    'sources.subtitle': 'Explora calificaciones de sesgo y puntuaciones de veracidad para las principales organizaciones de noticias del mundo.',
    'sources.search.placeholder': 'Buscar fuentes de noticias...',
    'sources.filter.all': 'Todos los Tipos de Sesgo',
    'sources.political': 'Sesgo Pol√≠tico',
    'sources.category': 'Categor√≠a',
    'sources.verified': 'Fuente Verificada',
    
    // API Settings
    'api.title': 'Configuraci√≥n de API',
    'api.configured.title': '¬°Claves API Configuradas!',
    'api.configured.subtitle': 'Tus claves de NewsAPI y GNews ya est√°n configuradas y listas para usar.',
    'api.newsapi.label': 'Clave NewsAPI',
    'api.newsapi.placeholder': 'Obtener de newsapi.org',
    'api.gnews.label': 'Clave API GNews',
    'api.gnews.placeholder': 'Obtener de gnews.io',
    'api.info.title': 'Informaci√≥n de API:',
    'api.info.newsapi': 'NewsAPI: 100 solicitudes/d√≠a (nivel gratuito)',
    'api.info.gnews': 'GNews: 100 solicitudes/d√≠a (nivel gratuito)',
    'api.storage.note': 'Las claves API se almacenan localmente en tu navegador',
    'api.button.update': 'Actualizar Claves',
    'api.button.saved': '¬°Guardado!',
    
    // Common
    'common.loading': 'Cargando...',
    'common.error': 'Error',
    'common.close': 'Cerrar',
    'common.save': 'Guardar',
    'common.cancel': 'Cancelar',
    'common.new': '¬°Nuevo!',
    'common.unknown': 'Desconocido',
  },
  ja: {
    // Header
    'header.title': '„Éê„Ç§„Ç¢„Çπ„Éª„Éê„Çπ„Çø„Éº',
    'header.analyzer': 'Ë®ò‰∫ãÂàÜÊûêÂô®',
    'header.dashboard': '„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ',
    'header.sources': '„ÇΩ„Éº„Çπ„Éª„Éá„Ç£„É¨„ÇØ„Éà„É™',
    'header.settings': 'APIË®≠ÂÆö',
    'header.darkMode': '„ÉÄ„Éº„ÇØ„É¢„Éº„Éâ„Å´Âàá„ÇäÊõø„Åà',
    'header.lightMode': '„É©„Ç§„Éà„É¢„Éº„Éâ„Å´Âàá„ÇäÊõø„Åà',
    
    // Article Analyzer
    'analyzer.hero.badge': 'AIÊê≠Ëºâ„Éê„Ç§„Ç¢„ÇπÊ§úÂá∫',
    'analyzer.hero.title1': 'Èö†„Çå„Åü',
    'analyzer.hero.title2': '„É°„Éá„Ç£„Ç¢„Éê„Ç§„Ç¢„Çπ„ÇíÁô∫Ë¶ã',
    'analyzer.hero.subtitle': 'È´òÂ∫¶„Å™AI„Çí‰ΩøÁî®„Åó„Å¶„ÄÅÊîøÊ≤ªÁöÑ„Éê„Ç§„Ç¢„Çπ„ÄÅÊÑüÊÉÖÁöÑË®ÄË™û„ÄÅ‰∫ãÂÆüÊÄß„ÇíÊ§úÂá∫„Åó„ÄÅ‰ªªÊÑè„ÅÆ„Éã„É•„Éº„ÇπË®ò‰∫ã„ÇíÁû¨ÊôÇ„Å´ÂàÜÊûê„Åó„Åæ„Åô„ÄÇÁï∞„Å™„Çã„ÇΩ„Éº„Çπ„ÅåÂêå„Åò„Çπ„Éà„Éº„É™„Éº„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´Êû†ÁµÑ„ÅøÂåñ„Åô„Çã„Åã„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
    'analyzer.input.placeholder': '„Éã„É•„Éº„ÇπË®ò‰∫ã„ÅÆURL„Çí„Åì„Åì„Å´Ë≤º„Çä‰ªò„Åë„Å¶„Åè„Å†„Åï„ÅÑ...',
    'analyzer.button.analyze': '‰ªä„Åô„ÅêÂàÜÊûê',
    'analyzer.button.analyzing': 'ÂàÜÊûê‰∏≠...',
    'analyzer.examples.title': '„Åì„Çå„Çâ„ÅÆ„Çµ„É≥„Éó„É´Ë®ò‰∫ã„ÇíË©¶„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºö',
    'analyzer.results.title': 'ÂàÜÊûêÂÆå‰∫Ü',
    'analyzer.results.subtitle': 'AIÊê≠Ëºâ„Éê„Ç§„Ç¢„ÇπÊ§úÂá∫ÁµêÊûú',
    'analyzer.results.source': '„ÇΩ„Éº„ÇπÔºö',
    'analyzer.results.author': 'ËëóËÄÖÔºö',
    'analyzer.results.published': 'ÂÖ¨ÈñãÊó•Ôºö',
    'analyzer.results.viewOriginal': 'ÂÖÉË®ò‰∫ã„ÇíË°®Á§∫',
    'analyzer.error.title': 'ÂàÜÊûê„Ç®„É©„Éº',
    
    // Bias Visualization
    'bias.political': 'ÊîøÊ≤ªÁöÑ„Éê„Ç§„Ç¢„Çπ',
    'bias.factuality': '‰∫ãÂÆüÊÄß',
    'bias.emotional': 'ÊÑüÊÉÖÁöÑË®ÄË™û',
    'bias.political.desc': '„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅßÊ§úÂá∫„Åï„Çå„ÅüÊîøÊ≤ªÁöÑÂÇæÂêë',
    'bias.factuality.desc': '‰ø°È†ºÊÄß„Å®Ê≠£Á¢∫ÊÄß„ÅÆË©ï‰æ°',
    'bias.emotional.desc': 'Ë®ÄË™û„ÅÆÊÑüÊÉÖÁöÑÂº∑Â∫¶',
    'bias.left': 'Â∑¶Ê¥æ',
    'bias.centerLeft': '‰∏≠ÈÅìÂ∑¶Ê¥æ',
    'bias.center': '‰∏≠ÈÅì',
    'bias.centerRight': '‰∏≠ÈÅìÂè≥Ê¥æ',
    'bias.right': 'Âè≥Ê¥æ',
    'bias.factuality.high': 'È´ò',
    'bias.factuality.medium': '‰∏≠',
    'bias.factuality.low': '‰Ωé',
    'bias.emotional.high': 'È´ò',
    'bias.emotional.medium': '‰∏≠',
    'bias.emotional.low': '‰Ωé',
    
    // Comparative Coverage
    'coverage.title': 'ÊØîËºÉÂ†±ÈÅì',
    'coverage.subtitle': 'Áï∞„Å™„Çã„ÇΩ„Éº„Çπ„Åå„Åì„ÅÆ„Çπ„Éà„Éº„É™„Éº„Çí„Å©„ÅÆ„Çà„ÅÜ„Å´Êû†ÁµÑ„ÅøÂåñ„Åô„Çã„Åã',
    'coverage.factuality': '‰∫ãÂÆüÊÄßÔºö',
    'coverage.tone': '„Éà„Éº„É≥Ôºö',
    'coverage.noResults': 'ÊØîËºÉÂ†±ÈÅì„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì',
    'coverage.noResults.subtitle': '„Çà„ÇäÊúÄËøë„ÅÆ„ÄÅ„Åæ„Åü„ÅØ‰∫∫Ê∞ó„ÅÆ„ÅÇ„ÇãË®ò‰∫ã„ÇíÂàÜÊûê„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ',
    
    // Article Highlights
    'highlights.title': '„Ç≥„É≥„ÉÜ„É≥„ÉÑÂàÜÊûê',
    'highlights.emotional': 'ÊÑüÊÉÖÁöÑË®ÄË™û',
    'highlights.bias': 'ÊΩúÂú®ÁöÑ„Éê„Ç§„Ç¢„Çπ',
    
    // Social Reactions
    'social.title': '„ÇΩ„Éº„Ç∑„É£„É´„É°„Éá„Ç£„Ç¢„ÅÆÂèçÂøú',
    'social.interactions': '„Ç§„É≥„Çø„É©„ÇØ„Ç∑„Éß„É≥',
    'social.comments': '„Éà„ÉÉ„Éó„Ç≥„É°„É≥„ÉàÔºö',
    'social.positive': '„Éù„Ç∏„ÉÜ„Ç£„Éñ',
    'social.negative': '„Éç„Ç¨„ÉÜ„Ç£„Éñ',
    'social.neutral': '„Éã„É•„Éº„Éà„É©„É´',
    
    // Dashboard
    'dashboard.hero.badge': 'ÂÄã‰∫∫ÂàÜÊûê',
    'dashboard.hero.title1': '„ÅÇ„Å™„Åü„ÅÆË™≠Êõ∏',
    'dashboard.hero.title2': 'ÂàÜÊûê',
    'dashboard.hero.subtitle': '„Éã„É•„Éº„ÇπÊ∂àË≤ª„Éë„Çø„Éº„É≥„ÄÅ„Éê„Ç§„Ç¢„ÇπÈú≤Âá∫„ÄÅË™≠Êõ∏ÁøíÊÖ£„ÇíÊôÇÈñì„ÅÆÁµåÈÅé„Å®„Å®„ÇÇ„Å´ËøΩË∑°„Åó„Åæ„Åô„ÄÇ',
    'dashboard.stats.analyzed': 'ÂàÜÊûê„Åï„Çå„ÅüË®ò‰∫ã',
    'dashboard.stats.alerts': '„Éê„Ç§„Ç¢„Çπ„Ç¢„É©„Éº„Éà',
    'dashboard.stats.sources': 'ËøΩË∑°„Åï„Çå„Åü„ÇΩ„Éº„Çπ',
    'dashboard.stats.streak': 'Ë™≠Êõ∏„Çπ„Éà„É™„Éº„ÇØ',
    'dashboard.stats.days': 'Êó•',
    'dashboard.bias.title': '„Éê„Ç§„Ç¢„ÇπÈú≤Âá∫Â±•Ê≠¥',
    'dashboard.bias.subtitle': 'ÈÅéÂéª5Êó•Èñì„ÅÆË™≠Êõ∏„Éë„Çø„Éº„É≥',
    'dashboard.bias.articles': 'Ë®ò‰∫ã',
    'dashboard.sources.title': '„Éà„ÉÉ„Éó„ÇΩ„Éº„Çπ',
    'dashboard.sources.subtitle': 'ÊúÄ„ÇÇË™≠„Åæ„Çå„Åü„Éã„É•„Éº„Çπ„ÇΩ„Éº„Çπ',
    'dashboard.sources.articles': 'Ë®ò‰∫ã',
    'dashboard.sources.factuality': '‰∫ãÂÆüÊÄß',
    
    // Source Directory
    'sources.title': '„Éã„É•„Éº„Çπ„ÇΩ„Éº„Çπ„Éª„Éá„Ç£„É¨„ÇØ„Éà„É™',
    'sources.subtitle': '‰∏ñÁïå„ÅÆ‰∏ªË¶Å„Éã„É•„Éº„ÇπÁµÑÁπî„ÅÆ„Éê„Ç§„Ç¢„ÇπË©ï‰æ°„Å®‰∫ãÂÆüÊÄß„Çπ„Ç≥„Ç¢„ÇíÊé¢Á¥¢„Åó„Åæ„Åô„ÄÇ',
    'sources.search.placeholder': '„Éã„É•„Éº„Çπ„ÇΩ„Éº„Çπ„ÇíÊ§úÁ¥¢...',
    'sources.filter.all': '„Åô„Åπ„Å¶„ÅÆ„Éê„Ç§„Ç¢„Çπ„Çø„Ç§„Éó',
    'sources.political': 'ÊîøÊ≤ªÁöÑ„Éê„Ç§„Ç¢„Çπ',
    'sources.category': '„Ç´„ÉÜ„Ç¥„É™',
    'sources.verified': 'Ê§úË®ºÊ∏à„Åø„ÇΩ„Éº„Çπ',
    
    // API Settings
    'api.title': 'APIË®≠ÂÆö',
    'api.configured.title': 'API„Ç≠„Éº„ÅåË®≠ÂÆö„Åï„Çå„Åæ„Åó„ÅüÔºÅ',
    'api.configured.subtitle': 'NewsAPI„Å®GNews„Ç≠„Éº„ÅØ„Åô„Åß„Å´Ë®≠ÂÆö„Åï„Çå„ÄÅ‰ΩøÁî®Ê∫ñÂÇô„ÅåÊï¥„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
    'api.newsapi.label': 'NewsAPI„Ç≠„Éº',
    'api.newsapi.placeholder': 'newsapi.org„Åã„ÇâÂèñÂæó',
    'api.gnews.label': 'GNews API„Ç≠„Éº',
    'api.gnews.placeholder': 'gnews.io„Åã„ÇâÂèñÂæó',
    'api.info.title': 'APIÊÉÖÂ†±Ôºö',
    'api.info.newsapi': 'NewsAPIÔºö100„É™„ÇØ„Ç®„Çπ„Éà/Êó•ÔºàÁÑ°Êñô„Éó„É©„É≥Ôºâ',
    'api.info.gnews': 'GNewsÔºö100„É™„ÇØ„Ç®„Çπ„Éà/Êó•ÔºàÁÑ°Êñô„Éó„É©„É≥Ôºâ',
    'api.storage.note': 'API„Ç≠„Éº„ÅØ„Éñ„É©„Ç¶„Ç∂„Å´„É≠„Éº„Ç´„É´„Å´‰øùÂ≠ò„Åï„Çå„Åæ„Åô',
    'api.button.update': '„Ç≠„Éº„ÇíÊõ¥Êñ∞',
    'api.button.saved': '‰øùÂ≠ò„Åï„Çå„Åæ„Åó„ÅüÔºÅ',
    
    // Common
    'common.loading': 'Ë™≠„ÅøËæº„Åø‰∏≠...',
    'common.error': '„Ç®„É©„Éº',
    'common.close': 'Èñâ„Åò„Çã',
    'common.save': '‰øùÂ≠ò',
    'common.cancel': '„Ç≠„É£„É≥„Çª„É´',
    'common.new': 'Êñ∞ÁùÄÔºÅ',
    'common.unknown': '‰∏çÊòé',
  },
  de: {
    // Header
    'header.title': 'Bias Buster',
    'header.analyzer': 'Artikel-Analysator',
    'header.dashboard': 'Dashboard',
    'header.sources': 'Quellen-Verzeichnis',
    'header.settings': 'API-Einstellungen',
    'header.darkMode': 'Zu dunklem Modus wechseln',
    'header.lightMode': 'Zu hellem Modus wechseln',
    
    // Article Analyzer
    'analyzer.hero.badge': 'KI-gest√ºtzte Bias-Erkennung',
    'analyzer.hero.title1': 'Versteckte',
    'analyzer.hero.title2': 'Medien-Bias aufdecken',
    'analyzer.hero.subtitle': 'Analysieren Sie jeden Nachrichtenartikel sofort mit unserer fortschrittlichen KI, um politische Voreingenommenheit, emotionale Sprache und Faktizit√§t zu erkennen. Sehen Sie, wie verschiedene Quellen dieselbe Geschichte rahmen.',
    'analyzer.input.placeholder': 'F√ºgen Sie hier eine beliebige Nachrichtenartikel-URL ein...',
    'analyzer.button.analyze': 'Jetzt analysieren',
    'analyzer.button.analyzing': 'Analysiere...',
    'analyzer.examples.title': 'Probieren Sie diese Beispielartikel aus:',
    'analyzer.results.title': 'Analyse abgeschlossen',
    'analyzer.results.subtitle': 'KI-gest√ºtzte Bias-Erkennungsergebnisse',
    'analyzer.results.source': 'Quelle:',
    'analyzer.results.author': 'Autor:',
    'analyzer.results.published': 'Ver√∂ffentlicht:',
    'analyzer.results.viewOriginal': 'Originalartikel anzeigen',
    'analyzer.error.title': 'Analyse-Fehler',
    
    // Bias Visualization
    'bias.political': 'Politische Voreingenommenheit',
    'bias.factuality': 'Faktizit√§t',
    'bias.emotional': 'Emotionale Sprache',
    'bias.political.desc': 'Im Inhalt erkannte politische Neigung',
    'bias.factuality.desc': 'Zuverl√§ssigkeits- und Genauigkeitsbewertung',
    'bias.emotional.desc': 'Emotionale Intensit√§t in der Sprache',
    'bias.left': 'Links',
    'bias.centerLeft': 'Mitte-Links',
    'bias.center': 'Mitte',
    'bias.centerRight': 'Mitte-Rechts',
    'bias.right': 'Rechts',
    'bias.factuality.high': 'Hoch',
    'bias.factuality.medium': 'Mittel',
    'bias.factuality.low': 'Niedrig',
    'bias.emotional.high': 'Hoch',
    'bias.emotional.medium': 'Mittel',
    'bias.emotional.low': 'Niedrig',
    
    // Comparative Coverage
    'coverage.title': 'Vergleichende Berichterstattung',
    'coverage.subtitle': 'Wie verschiedene Quellen diese Geschichte rahmen',
    'coverage.factuality': 'Faktizit√§t:',
    'coverage.tone': 'Ton:',
    'coverage.noResults': 'Keine vergleichende Berichterstattung gefunden',
    'coverage.noResults.subtitle': 'Versuchen Sie, einen aktuelleren oder beliebteren Artikel zu analysieren',
    
    // Article Highlights
    'highlights.title': 'Inhaltsanalyse',
    'highlights.emotional': 'Emotionale Sprache',
    'highlights.bias': 'Potenzielle Voreingenommenheit',
    
    // Social Reactions
    'social.title': 'Social Media Reaktionen',
    'social.interactions': 'Interaktionen',
    'social.comments': 'Top-Kommentare:',
    'social.positive': 'positiv',
    'social.negative': 'negativ',
    'social.neutral': 'neutral',
    
    // Dashboard
    'dashboard.hero.badge': 'Pers√∂nliche Analytik',
    'dashboard.hero.title1': 'Ihre Lese-',
    'dashboard.hero.title2': 'Analytik',
    'dashboard.hero.subtitle': 'Verfolgen Sie Ihre Nachrichtenkonsummuster, Bias-Exposition und Lesegewohnheiten im Laufe der Zeit.',
    'dashboard.stats.analyzed': 'Analysierte Artikel',
    'dashboard.stats.alerts': 'Bias-Warnungen',
    'dashboard.stats.sources': 'Verfolgte Quellen',
    'dashboard.stats.streak': 'Lese-Serie',
    'dashboard.stats.days': 'Tage',
    'dashboard.bias.title': 'Bias-Expositionsverlauf',
    'dashboard.bias.subtitle': 'Lesemuster der letzten 5 Tage',
    'dashboard.bias.articles': 'Artikel',
    'dashboard.sources.title': 'Top-Quellen',
    'dashboard.sources.subtitle': 'Meistgelesene Nachrichtenquellen',
    'dashboard.sources.articles': 'Artikel',
    'dashboard.sources.factuality': 'Faktizit√§t',
    
    // Source Directory
    'sources.title': 'Nachrichtenquellen-Verzeichnis',
    'sources.subtitle': 'Erkunden Sie Bias-Bewertungen und Faktizit√§tswerte f√ºr gro√üe Nachrichtenorganisationen weltweit.',
    'sources.search.placeholder': 'Nachrichtenquellen suchen...',
    'sources.filter.all': 'Alle Bias-Typen',
    'sources.political': 'Politische Voreingenommenheit',
    'sources.category': 'Kategorie',
    'sources.verified': 'Verifizierte Quelle',
    
    // API Settings
    'api.title': 'API-Konfiguration',
    'api.configured.title': 'API-Schl√ºssel konfiguriert!',
    'api.configured.subtitle': 'Ihre NewsAPI- und GNews-Schl√ºssel sind bereits eingerichtet und einsatzbereit.',
    'api.newsapi.label': 'NewsAPI-Schl√ºssel',
    'api.newsapi.placeholder': 'Von newsapi.org erhalten',
    'api.gnews.label': 'GNews API-Schl√ºssel',
    'api.gnews.placeholder': 'Von gnews.io erhalten',
    'api.info.title': 'API-Informationen:',
    'api.info.newsapi': 'NewsAPI: 100 Anfragen/Tag (kostenloser Tarif)',
    'api.info.gnews': 'GNews: 100 Anfragen/Tag (kostenloser Tarif)',
    'api.storage.note': 'API-Schl√ºssel werden lokal in Ihrem Browser gespeichert',
    'api.button.update': 'Schl√ºssel aktualisieren',
    'api.button.saved': 'Gespeichert!',
    
    // Common
    'common.loading': 'Laden...',
    'common.error': 'Fehler',
    'common.close': 'Schlie√üen',
    'common.save': 'Speichern',
    'common.cancel': 'Abbrechen',
    'common.new': 'Neu!',
    'common.unknown': 'Unbekannt',
  },
  fr: {
    // Header
    'header.title': 'D√©tecteur de Biais',
    'header.analyzer': 'Analyseur d\'Articles',
    'header.dashboard': 'Tableau de Bord',
    'header.sources': 'R√©pertoire des Sources',
    'header.settings': 'Param√®tres API',
    'header.darkMode': 'Passer en mode sombre',
    'header.lightMode': 'Passer en mode clair',
    
    // Article Analyzer
    'analyzer.hero.badge': 'D√©tection de Biais par IA',
    'analyzer.hero.title1': 'D√©couvrez les',
    'analyzer.hero.title2': 'Biais M√©diatiques Cach√©s',
    'analyzer.hero.subtitle': 'Analysez instantan√©ment tout article de presse avec notre IA avanc√©e pour d√©tecter les biais politiques, le langage √©motionnel et la factualit√©. Voyez comment diff√©rentes sources encadrent la m√™me histoire.',
    'analyzer.input.placeholder': 'Collez ici l\'URL de n\'importe quel article de presse...',
    'analyzer.button.analyze': 'Analyser Maintenant',
    'analyzer.button.analyzing': 'Analyse en cours...',
    'analyzer.examples.title': 'Essayez ces articles d\'exemple :',
    'analyzer.results.title': 'Analyse Termin√©e',
    'analyzer.results.subtitle': 'R√©sultats de d√©tection de biais par IA',
    'analyzer.results.source': 'Source :',
    'analyzer.results.author': 'Auteur :',
    'analyzer.results.published': 'Publi√© :',
    'analyzer.results.viewOriginal': 'Voir l\'Article Original',
    'analyzer.error.title': 'Erreur d\'Analyse',
    
    // Bias Visualization
    'bias.political': 'Biais Politique',
    'bias.factuality': 'Factualit√©',
    'bias.emotional': 'Langage √âmotionnel',
    'bias.political.desc': 'Tendance politique d√©tect√©e dans le contenu',
    'bias.factuality.desc': '√âvaluation de la fiabilit√© et de la pr√©cision',
    'bias.emotional.desc': 'Intensit√© √©motionnelle dans le langage',
    'bias.left': 'Gauche',
    'bias.centerLeft': 'Centre-Gauche',
    'bias.center': 'Centre',
    'bias.centerRight': 'Centre-Droite',
    'bias.right': 'Droite',
    'bias.factuality.high': '√âlev√©e',
    'bias.factuality.medium': 'Moyenne',
    'bias.factuality.low': 'Faible',
    'bias.emotional.high': '√âlev√©',
    'bias.emotional.medium': 'Moyen',
    'bias.emotional.low': 'Faible',
    
    // Comparative Coverage
    'coverage.title': 'Couverture Comparative',
    'coverage.subtitle': 'Comment diff√©rentes sources encadrent cette histoire',
    'coverage.factuality': 'Factualit√© :',
    'coverage.tone': 'Ton :',
    'coverage.noResults': 'Aucune couverture comparative trouv√©e',
    'coverage.noResults.subtitle': 'Essayez d\'analyser un article plus r√©cent ou populaire',
    
    // Article Highlights
    'highlights.title': 'Analyse du Contenu',
    'highlights.emotional': 'Langage √âmotionnel',
    'highlights.bias': 'Biais Potentiel',
    
    // Social Reactions
    'social.title': 'R√©actions des R√©seaux Sociaux',
    'social.interactions': 'interactions',
    'social.comments': 'Commentaires Principaux :',
    'social.positive': 'positif',
    'social.negative': 'n√©gatif',
    'social.neutral': 'neutre',
    
    // Dashboard
    'dashboard.hero.badge': 'Analytiques Personnelles',
    'dashboard.hero.title1': 'Vos Analytiques',
    'dashboard.hero.title2': 'de Lecture',
    'dashboard.hero.subtitle': 'Suivez vos habitudes de consommation d\'actualit√©s, l\'exposition aux biais et les habitudes de lecture au fil du temps.',
    'dashboard.stats.analyzed': 'Articles Analys√©s',
    'dashboard.stats.alerts': 'Alertes de Biais',
    'dashboard.stats.sources': 'Sources Suivies',
    'dashboard.stats.streak': 'S√©rie de Lecture',
    'dashboard.stats.days': 'jours',
    'dashboard.bias.title': 'Historique d\'Exposition aux Biais',
    'dashboard.bias.subtitle': 'Mod√®les de lecture des 5 derniers jours',
    'dashboard.bias.articles': 'articles',
    'dashboard.sources.title': 'Sources Principales',
    'dashboard.sources.subtitle': 'Sources d\'actualit√©s les plus lues',
    'dashboard.sources.articles': 'articles',
    'dashboard.sources.factuality': 'factualit√©',
    
    // Source Directory
    'sources.title': 'R√©pertoire des Sources d\'Actualit√©s',
    'sources.subtitle': 'Explorez les √©valuations de biais et les scores de factualit√© pour les principales organisations de presse mondiales.',
    'sources.search.placeholder': 'Rechercher des sources d\'actualit√©s...',
    'sources.filter.all': 'Tous les Types de Biais',
    'sources.political': 'Biais Politique',
    'sources.category': 'Cat√©gorie',
    'sources.verified': 'Source V√©rifi√©e',
    
    // API Settings
    'api.title': 'Configuration API',
    'api.configured.title': 'Cl√©s API Configur√©es !',
    'api.configured.subtitle': 'Vos cl√©s NewsAPI et GNews sont d√©j√† configur√©es et pr√™tes √† utiliser.',
    'api.newsapi.label': 'Cl√© NewsAPI',
    'api.newsapi.placeholder': 'Obtenir de newsapi.org',
    'api.gnews.label': 'Cl√© API GNews',
    'api.gnews.placeholder': 'Obtenir de gnews.io',
    'api.info.title': 'Informations API :',
    'api.info.newsapi': 'NewsAPI : 100 requ√™tes/jour (niveau gratuit)',
    'api.info.gnews': 'GNews : 100 requ√™tes/jour (niveau gratuit)',
    'api.storage.note': 'Les cl√©s API sont stock√©es localement dans votre navigateur',
    'api.button.update': 'Mettre √† Jour les Cl√©s',
    'api.button.saved': 'Sauvegard√© !',
    
    // Common
    'common.loading': 'Chargement...',
    'common.error': 'Erreur',
    'common.close': 'Fermer',
    'common.save': 'Sauvegarder',
    'common.cancel': 'Annuler',
    'common.new': 'Nouveau !',
    'common.unknown': 'Inconnu',
  }
};

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>(() => {
    // Check localStorage first, then browser language, then default to English
    const saved = localStorage.getItem('language') as Language;
    if (saved && Object.keys(languageMetadata).includes(saved)) {
      return saved;
    }
    
    // Check browser language
    const browserLang = navigator.language.toLowerCase();
    if (browserLang.startsWith('es')) return 'es';
    if (browserLang.startsWith('ja')) return 'ja';
    if (browserLang.startsWith('de')) return 'de';
    if (browserLang.startsWith('fr')) return 'fr';
    
    return 'en';
  });

  // Translation function
  const t = (key: string): string => {
    return translations[language][key] || translations.en[key] || key;
  };

  // Get language display name
  const getLanguageName = (lang: Language): string => {
    return languageMetadata[lang].name;
  };

  // Get language flag emoji
  const getLanguageFlag = (lang: Language): string => {
    return languageMetadata[lang].flag;
  };

  // Save language preference and update document language
  useEffect(() => {
    localStorage.setItem('language', language);
    document.documentElement.lang = language;
    
    // Update document direction
    document.documentElement.dir = languageMetadata[language].dir;
  }, [language]);

  return (
    <LanguageContext.Provider value={{
      language,
      setLanguage,
      t,
      getLanguageName,
      getLanguageFlag
    }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};